{{ define "main" }}

  <main class="center">
    <div class="content">
      <h1>Hello CanI.TF!!!</h1>
      {{- $data := dict }}
      {{- with $file := "canitf.csv" }}
        {{- with resources.Get $file }}
          {{ with . | transform.Unmarshal }}
            <table>
              <thead>
                <tr>
                  {{ range index . 0 }}
                    <th>{{ . }}</th>
                  {{ end }}
                </tr>
              </thead>
              <tbody>
                {{ range after 1 . }}
                  <tr>
                    {{- range . }}
                    <td>{{ if eq . "true" }}{{ replace . "true" "✅" }}{{ else }}{{ replace . "false" "❌" | markdownify }}</td>
                    {{- end }}
                    {{- end }}
                  </tr>
                {{- end }}
              </tbody>
            </table>
          {{- end }}
      {{ else }}
        {{ errorf "Unable to get resource %q" $file }}
      {{- end }}
      {{- end }}
    </div>
  </main>

{{ end }}
